<!--It can be reproduced and reproduced with the consent of
 CyberKingfisher. If it is reproduced without permission, 
 it will be investigated.-->
<!--kingfisherhaker.github.io-->
<!--Copyright (c) 2025 Cyberkingfisher-->
<!--Pages:NewPages-->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新建标签页</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FFFFFF', 
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .glass {
                background: rgba(255, 255, 255, 0.003), 0.08);
                backdrop-filter: blur(24px);
                -webkit-backdrop-filter: blur(24px);
                border: 1px solid rgba(255, 255, 255, 0.1);
                box-shadow: 0 4px 30px rgba(0, 0, 0, 0.05);
            }
            .search-input {
                &::placeholder {
                    color: rgba(255, 255, 255, 0.808);
                }
                &:focus {
                    outline: none;
                    box-shadow: 0 0 0 1px rgba(143, 138, 138, 0.199);
                }
            }
            .search-btn {
                transition: all 0.2s ease-in-out;
                background: rgba(255, 255, 255, 0.1);
                &:hover {
                    background: rgba(255, 255, 255, 0.18);
                    transform: translateY(-1px);
                    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
                }
                &:active {
                    transform: translateY(0);
                }
            }
            .dark-mode .search-input {
                &, &::placeholder {
                    color: rgba(255, 255, 255, 0.9);
                }
            }
            .light-mode .search-input {
                & {
                    color: rgba(0, 0, 0, 0.85);
                }
                &::placeholder {
                    color: rgba(0, 0, 0, 0.5);
                }
            }
            .wallpaper-btn {
                transition: all 0.3s ease;
                opacity: 0.7;
            }
            .wallpaper-btn:hover {
                opacity: 1;
                transform: scale(1.1);
            }
            .image-info-modal {
                opacity: 0;
                visibility: hidden;
                transition: opacity 0.3s ease-out, visibility 0.3s ease-out;
            }
            .image-info-modal.show {
                opacity: 1;
                visibility: visible;
            }
            .modal-content {
                transform: scale(0);
                transform-origin: bottom left;
                transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            }
            .image-info-modal.show .modal-content {
                transform: scale(1);
            }
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center overflow-hidden">
    <div class="absolute inset-0 z-0">
        <img id="bing-wallpaper" alt="Bing每日壁纸" class="w-full h-full object-cover transition-opacity duration-500">
        <div class="absolute inset-0 bg-black/20"></div>
    </div>
    <div class="relative z-10 w-full max-w-2xl px-4">
        <div class="glass rounded-full p-1 w-full transition-all duration-300 hover:shadow-lg">
            <form id="search-form" class="flex items-center">
                <input 
                    type="text" 
                    id="search-input"
                    placeholder="搜索网页或输入网址..." 
                    class="search-input flex-grow bg-transparent py-3 px-6 w-full rounded-full text-sm"
                    autocomplete="off"
                >
                <button type="submit" class="search-btn text-primary px-5 py-2 rounded-full ml-1 mr-2 text-sm font-medium">
                    GO
                </button>
            </form>
        </div>
    </div>
    <div class="absolute bottom-8 left-8 z-20 flex gap-4">
        <button id="image-info" class="wallpaper-btn glass w-12 h-12 rounded-full flex items-center justify-center text-white">
            <i class="fa fa-info-circle"></i>
        </button>
        <button id="mode-toggle" class="wallpaper-btn glass w-12 h-12 rounded-full flex items-center justify-center text-white">
            <i class="fa fa-paint-brush"></i>
        </button>
    </div>
    <div class="absolute bottom-8 right-8 flex gap-4 z-20">
        <button id="prev-wallpaper" class="wallpaper-btn glass w-12 h-12 rounded-full flex items-center justify-center text-white">
            <i class="fa fa-chevron-left"></i>
        </button>
        <button id="next-wallpaper" class="wallpaper-btn glass w-12 h-12 rounded-full flex items-center justify-center text-white">
            <i class="fa fa-chevron-right"></i>
        </button>
    </div>
    <div id="image-info-modal" class="image-info-modal fixed inset-0 z-50 flex items-center justify-center">
        <div class="absolute inset-0 bg-black/70 backdrop-blur-sm" id="modal-overlay"></div>
        <div class="modal-content glass rounded-xl p-6 max-w-md w-full mx-4 relative z-10">
            <h3 class="text-xl font-semibold mb-2 text-white" id="image-title">图片名称</h3>
            <p class="text-white/80 mb-4" id="image-desc">图片信息...</p>
            <button id="close-modal" class="absolute top-4 right-4 text-white/70 hover:text-white">
                <i class="fa fa-times"></i>
            </button>
        </div>
    </div>
    
    <script>
        let currentWallpaperIndex = 0;
        const maxWallpaperIndex = 7;
        let wallpaperMode = 0; // 提示：0: 背景, 1: 深色纯色, 2: 亮色纯色
        const darkColor = '#1a1a2e';
        const lightColor = '#f7f7f9';
        let currentWallpaperInfo = null;
        
        function setBingWallpaper(index = 0) {
            const wallpaperImg = document.getElementById('bing-wallpaper');
            const overlay = document.querySelector('.absolute.inset-0.bg-black\\/20');
            wallpaperImg.style.display = 'block';
            overlay.style.display = 'block';
            document.body.style.backgroundColor = 'transparent';
            
            wallpaperImg.style.opacity = "0.7";
            
            fetch(`https://bing.biturl.top/?resolution=1920&format=json&index=${index}&mkt=zh-CN`)
                .then(response => response.json())
                .then(data => {
                    currentWallpaperInfo = {
                        title: data.copyright.split('(')[0].trim(),
                        desc: data.copyright
                    };
                    
                    const tempImg = new Image();
                    tempImg.src = data.url;
                    tempImg.onload = function() {
                        wallpaperImg.src = data.url;
                        wallpaperImg.style.opacity = "1";
                        currentWallpaperIndex = index;
                    };
                    tempImg.onerror = function() {
                        handleWallpaperError(wallpaperImg);
                    };
                })
                .catch(error => {
                    console.error('获取背景失败:', error);
                    handleWallpaperError(wallpaperImg);
                });
        }
        function handleWallpaperError(wallpaperImg) {
            wallpaperImg.src = 'background.png';
            wallpaperImg.style.opacity = "1";
            currentWallpaperInfo = {
                title: "默认背景",
                desc: "无法加载背景，显示默认背景图片"
            };
        }

        function prevWallpaper() {
            if (wallpaperMode !== 0) return;
            let newIndex = currentWallpaperIndex - 1;
            if (newIndex < 0) {
                newIndex = maxWallpaperIndex;
            }
            setBingWallpaper(newIndex);
        }

        function nextWallpaper() {
            if (wallpaperMode !== 0) return;
            let newIndex = currentWallpaperIndex + 1;
            if (newIndex > maxWallpaperIndex) {
                newIndex = 0;
            }
            setBingWallpaper(newIndex);
        }
        
        function toggleWallpaperMode() {
            const container = document.querySelector('.max-w-2xl');
            container.classList.remove('dark-mode', 'light-mode');
            
            const wallpaperImg = document.getElementById('bing-wallpaper');
            const overlay = document.querySelector('.absolute.inset-0.bg-black\\/20');
            const searchInput = document.getElementById('search-input');

            wallpaperMode = (wallpaperMode + 1) % 3;
            
            switch(wallpaperMode) {
                case 1:
                    wallpaperImg.style.display = 'none';
                    overlay.style.display = 'none';
                    document.body.style.backgroundColor = darkColor;
                    container.classList.add('dark-mode');
                    break;
                case 2:
                    wallpaperImg.style.display = 'none';
                    overlay.style.display = 'none';
                    document.body.style.backgroundColor = lightColor;
                    container.classList.add('light-mode');
                    break;
                default:
                    setBingWallpaper(currentWallpaperIndex);
                    container.classList.remove('dark-mode', 'light-mode');
                    break;
            }
        }

        function showImageInfo() {
            if (wallpaperMode !== 0 || !currentWallpaperInfo) return;
            
            const modal = document.getElementById('image-info-modal');
            const titleEl = document.getElementById('image-title');
            const descEl = document.getElementById('image-desc');
            
            titleEl.textContent = currentWallpaperInfo.title;
            descEl.textContent = currentWallpaperInfo.desc;
            
            modal.classList.add('show');
        }

        function closeImageInfo() {
            const modal = document.getElementById('image-info-modal');
            modal.classList.remove('show');
        }

        function handleSearch(event) {
            event.preventDefault();
            const input = document.getElementById('search-input');
            const query = input.value.trim();
            
            if (!query) return;
            
            let url = query;
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                if (url.includes('.') && !url.includes(' ')) {
                    url = 'https://' + url;
                    window.location.href = url;
                    return;
                }
            } else {
                window.location.href = url;
                return;
            }
            
            window.location.href = `https://www.bing.com/search?q=${encodeURIComponent(query)}`;
        }

        document.addEventListener('DOMContentLoaded', () => {
            const searchInput = document.getElementById('search-input');
            searchInput.focus();
            
            setBingWallpaper();
            
            document.getElementById('prev-wallpaper').addEventListener('click', prevWallpaper);
            document.getElementById('next-wallpaper').addEventListener('click', nextWallpaper);
            document.getElementById('mode-toggle').addEventListener('click', toggleWallpaperMode);
            document.getElementById('image-info').addEventListener('click', showImageInfo);
            document.getElementById('close-modal').addEventListener('click', closeImageInfo);
            document.getElementById('modal-overlay').addEventListener('click', closeImageInfo);
            
            document.getElementById('search-form').addEventListener('submit', handleSearch);
            
            document.addEventListener('keydown', (e) => {
                if (wallpaperMode !== 0) return;
                if (e.key === 'ArrowLeft') {
                    prevWallpaper();
                } else if (e.key === 'ArrowRight') {
                    nextWallpaper();
                }
            });

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeImageInfo();
                }
            });
        });
    </script>
</body>
</html>
