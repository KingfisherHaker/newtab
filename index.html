<!--It can be reproduced and reproduced with the consent of
 CyberKingfisher. If it is reproduced without permission, 
 it will be investigated.-->
<!--kingfisherhaker.github.io-->
<!--Copyright (c) 2025 Cyberkingfisher-->
<!--Pages:NewPages-->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新建标签页</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FFFFFF', 
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .glass {
                /* 增强的苹果液态玻璃效果 - 更高透明度 */
                background: rgba(255, 255, 255, 0.08);
                backdrop-filter: blur(24px);
                -webkit-backdrop-filter: blur(24px);
                border: 1px solid rgba(255, 255, 255, 0.1);
                box-shadow: 0 4px 30px rgba(0, 0, 0, 0.05);
            }
            .no-glass {
                background: rgba(255, 255, 255, 0.9);
                border: 1px solid rgba(255, 255, 255, 0.2);
                box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            }
            .dark-mode .no-glass {
                background: rgba(30, 30, 40, 0.9);
                border: 1px solid rgba(50, 50, 70, 0.3);
            }
            .search-input {
                &::placeholder {
                    color: rgba(255, 255, 255, 0.6);
                }
                &:focus {
                    outline: none;
                    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.15);
                }
            }
            .search-btn {
                transition: all 0.2s ease-in-out;
                background: rgba(255, 255, 255, 0.1);
                &:hover {
                    background: rgba(255, 255, 255, 0.18);
                    transform: translateY(-1px);
                    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
                }
                &:active {
                    transform: translateY(0);
                }
            }
            .dark-mode .search-btn {
                background: rgba(255, 255, 255, 0.15);
                &:hover {
                    background: rgba(255, 255, 255, 0.25);
                }
            }
            .light-mode .search-btn {
                background: rgba(0, 0, 0, 0.1);
                &:hover {
                    background: rgba(0, 0, 0, 0.18);
                }
            }
            /* 模式切换时的文本颜色适配 */
            .dark-mode .search-input {
                &, &::placeholder {
                    color: rgba(255, 255, 255, 0.9);
                }
            }
            .light-mode .search-input {
                & {
                    color: rgba(0, 0, 0, 0.85);
                }
                &::placeholder {
                    color: rgba(0, 0, 0, 0.5);
                }
            }
            .wallpaper-btn {
                transition: all 0.3s ease;
                opacity: 0.7;
            }
            .wallpaper-btn:hover {
                opacity: 1;
                transform: scale(1.1);
            }
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center overflow-hidden">
    <div class="absolute inset-0 z-0">
        <img id="bing-wallpaper" alt="Bing每日壁纸" class="w-full h-full object-cover transition-opacity duration-500">
        <div class="absolute inset-0 bg-black/20"></div>
    </div>
    <div class="relative z-10 w-full max-w-2xl px-4">
        <div class="glass rounded-full p-1 w-full transition-all duration-300 hover:shadow-lg" id="search-container">
            <form id="search-form" class="flex items-center">
                <input 
                    type="text" 
                    id="search-input"
                    placeholder="搜索网页或输入网址..." 
                    class="search-input flex-grow bg-transparent py-3 px-6 w-full rounded-full text-sm"
                    autocomplete="off"
                >
                <button type="submit" class="search-btn text-primary px-5 py-2 rounded-full ml-1 mr-2 text-sm font-medium">
                    GO
                </button>
            </form>
        </div>
    </div>
    
    <!-- 左下角控制按钮 -->
    <div class="absolute bottom-8 left-8 z-20 flex gap-4">
        <button id="mode-toggle" class="wallpaper-btn glass w-12 h-12 rounded-full flex items-center justify-center text-white">
            <i class="fa fa-paint-brush"></i>
        </button>
        <button id="glass-toggle" class="wallpaper-btn glass w-12 h-12 rounded-full flex items-center justify-center text-white">
            <i class="fa fa-magic"></i>
        </button>
    </div>
    
    <!-- 壁纸切换按钮 -->
    <div class="absolute bottom-8 right-8 flex gap-4 z-20">
        <button id="prev-wallpaper" class="wallpaper-btn glass w-12 h-12 rounded-full flex items-center justify-center text-white">
            <i class="fa fa-chevron-left"></i>
        </button>
        <button id="next-wallpaper" class="wallpaper-btn glass w-12 h-12 rounded-full flex items-center justify-center text-white">
            <i class="fa fa-chevron-right"></i>
        </button>
    </div>
    
    <script>
        let currentWallpaperIndex = 0;
        const maxWallpaperIndex = 7;
        let wallpaperMode = 0; // 0: Bing壁纸, 1: 深色纯色, 2: 亮色纯色
        let glassEnabled = true; // 液态玻璃效果开关
        const darkColor = '#1a1a2e'; // 深色纯色
        const lightColor = '#f7f7f9'; // 亮色纯色
        
        // 设置Bing壁纸
        function setBingWallpaper(index = 0) {
            const wallpaperImg = document.getElementById('bing-wallpaper');
            const overlay = document.querySelector('.absolute.inset-0.bg-black\\/20');
            
            // 显示图片元素，隐藏纯色背景
            wallpaperImg.style.display = 'block';
            overlay.style.display = 'block';
            document.body.style.backgroundColor = 'transparent';
            
            wallpaperImg.style.opacity = "0.7";
            
            fetch(`https://bing.biturl.top/?resolution=1920&format=json&index=${index}&mkt=zh-CN`)
                .then(response => response.json())
                .then(data => {
                    const tempImg = new Image();
                    tempImg.src = data.url;
                    tempImg.onload = function() {
                        wallpaperImg.src = data.url;
                        wallpaperImg.style.opacity = "1";
                        currentWallpaperIndex = index;
                    };
                    tempImg.onerror = function() {
                        handleWallpaperError(wallpaperImg);
                    };
                })
                .catch(error => {
                    console.error('获取Bing壁纸失败:', error);
                    handleWallpaperError(wallpaperImg);
                });
        }
        
        // 处理壁纸加载错误
        function handleWallpaperError(wallpaperImg) {
            wallpaperImg.src = 'background.png';
            wallpaperImg.style.opacity = "1";
        }
        
        // 切换到上一张壁纸
        function prevWallpaper() {
            if (wallpaperMode !== 0) return; // 只有在Bing壁纸模式下才生效
            let newIndex = currentWallpaperIndex - 1;
            if (newIndex < 0) {
                newIndex = maxWallpaperIndex;
            }
            setBingWallpaper(newIndex);
        }
        
        // 切换到下一张壁纸
        function nextWallpaper() {
            if (wallpaperMode !== 0) return; // 只有在Bing壁纸模式下才生效
            let newIndex = currentWallpaperIndex + 1;
            if (newIndex > maxWallpaperIndex) {
                newIndex = 0;
            }
            setBingWallpaper(newIndex);
        }
        
        // 切换壁纸模式
        function toggleWallpaperMode() {
            const container = document.querySelector('.max-w-2xl');
            // 移除所有模式类
            container.classList.remove('dark-mode', 'light-mode');
            
            const wallpaperImg = document.getElementById('bing-wallpaper');
            const overlay = document.querySelector('.absolute.inset-0.bg-black\\/20');
            const searchInput = document.getElementById('search-input');
            
            // 循环切换模式 0->1->2->0
            wallpaperMode = (wallpaperMode + 1) % 3;
            
            switch(wallpaperMode) {
                case 1: // 深色纯色
                    wallpaperImg.style.display = 'none';
                    overlay.style.display = 'none';
                    document.body.style.backgroundColor = darkColor;
                    container.classList.add('dark-mode');
                    break;
                case 2: // 亮色纯色
                    wallpaperImg.style.display = 'none';
                    overlay.style.display = 'none';
                    document.body.style.backgroundColor = lightColor;
                    container.classList.add('light-mode');
                    break;
                default: // Bing壁纸
                    setBingWallpaper(currentWallpaperIndex);
                    container.classList.remove('dark-mode', 'light-mode');
                    break;
            }
            
            // 保持玻璃效果状态一致
            updateGlassEffect();
        }

        // 切换玻璃效果
        function toggleGlassEffect() {
            glassEnabled = !glassEnabled;
            updateGlassEffect();
        }

        // 更新玻璃效果显示
        function updateGlassEffect() {
            const searchContainer = document.getElementById('search-container');
            const modeBtn = document.getElementById('mode-toggle');
            const glassBtn = document.getElementById('glass-toggle');
            const prevBtn = document.getElementById('prev-wallpaper');
            const nextBtn = document.getElementById('next-wallpaper');
            
            // 切换搜索框的玻璃效果
            if (glassEnabled) {
                searchContainer.classList.remove('no-glass');
                searchContainer.classList.add('glass');
                
                // 恢复按钮的玻璃效果
                [modeBtn, glassBtn, prevBtn, nextBtn].forEach(btn => {
                    btn.classList.remove('no-glass');
                    btn.classList.add('glass');
                });
                
                // 更新按钮图标
                glassBtn.innerHTML = '<i class="fa fa-magic"></i>';
            } else {
                searchContainer.classList.remove('glass');
                searchContainer.classList.add('no-glass');
                
                // 移除按钮的玻璃效果
                [modeBtn, glassBtn, prevBtn, nextBtn].forEach(btn => {
                    btn.classList.remove('glass');
                    btn.classList.add('no-glass');
                });
                
                // 更新按钮图标
                glassBtn.innerHTML = '<i class="fa fa-ban"></i>';
            }
        }

        // 处理搜索或网址跳转
        function handleSearch(event) {
            event.preventDefault();
            const input = document.getElementById('search-input');
            const query = input.value.trim();
            
            if (!query) return;
            
            // 检查是否是URL
            let url = query;
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                // 检查是否包含域名后缀（简单判断）
                if (url.includes('.') && !url.includes(' ')) {
                    url = 'https://' + url;
                    window.location.href = url;
                    return;
                }
            } else {
                window.location.href = url;
                return;
            }
            
            // 不是URL则执行搜索
            window.location.href = `https://www.bing.com/search?q=${encodeURIComponent(query)}`;
        }

        document.addEventListener('DOMContentLoaded', () => {
            const searchInput = document.getElementById('search-input');
            searchInput.focus();
            
            // 加载初始壁纸
            setBingWallpaper();
            
            // 绑定按钮事件
            document.getElementById('prev-wallpaper').addEventListener('click', prevWallpaper);
            document.getElementById('next-wallpaper').addEventListener('click', nextWallpaper);
            document.getElementById('mode-toggle').addEventListener('click', toggleWallpaperMode);
            document.getElementById('glass-toggle').addEventListener('click', toggleGlassEffect);
            
            // 绑定表单提交事件
            document.getElementById('search-form').addEventListener('submit', handleSearch);
            
            // 支持键盘左右箭头切换（仅在Bing模式下）
            document.addEventListener('keydown', (e) => {
                if (wallpaperMode !== 0) return;
                if (e.key === 'ArrowLeft') {
                    prevWallpaper();
                } else if (e.key === 'ArrowRight') {
                    nextWallpaper();
                }
            });
        });
    </script>
</body>
</html>
